<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="../js/vue.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div id="root">
      <h1>学生信息</h1>
      <h3>姓名: {{student.name}}</h3>
      <h3 v-show="student.sex">性别: {{student.sex}}</h3>
      <button @click.once="addSex">添加性别属性,默认:男</button>
      <button @click="changeSex">改变属性</button>
      <h3>年龄: {{student.age}}</h3>
      <button @click="student.age++">年龄+1岁</button>
      <h3>爱好:</h3>
      <ul>
        <li v-for="(value,index) in student.hobby" :key="index">{{value}}</li>
      </ul>
      <input type="text" v-model="student.newHobbyName" :style="student.gap"> <button @click="addHobbyAtLast">添加一个爱好</button> <br>
      <button @click="changeFirstHobby">修改第一个爱好为: 开车</button>
      <button @click="removeHobbySmoke">过滤掉爱好中的抽烟</button>
      <h3>朋友:</h3>
      <ul>
        <li v-for="(value,index) in student.friends" :key="index">{{value.name}}--{{value.age}}</li>
      </ul>
      <button @click="addFriendAtFirst">在列表首位添加一个朋友</button>
      <button @click="updateFirstFriendName">修改第一个朋友的名字为: 张三</button>
    </div>
    <script>
      new Vue({
        el: "#root",
        data: {
          student: {
            name: "LittlerXu",
            age: 20,
            hobby: ["抽烟", "喝酒", "烫头"],
            newHobbyName: '',
            gap: {
              lineHeight: '25px',
            },
            friends: [
              { name: "jerry", age: 35 },
              { name: "tony", age: 36 },
            ],
          },
        },
        methods: {
            addSex() {
                Vue.set(this.student,'sex','男')
            },
            changeSex() {
                if(this.student.sex) {
                  this.student.sex =
                this.student.sex === '男' ? '女' : '男'
                }
            },
            addHobbyAtLast() {
              this.student.hobby.push(this.student.newHobbyName)
              this.student.newHobbyName = ''
            },
            changeFirstHobby() {
              // Vue.set(this.student.hobby,0,'开车')
              // this.$set(this.student.hobby,0,'开车')
              // 推荐使用数组的splice()方法为数组添加元素,而非set()方法
              this.student.hobby.splice(0,1,'开车')
            },
            removeHobbySmoke() {
              this.student.hobby = this.student.hobby.filter((h)=>{
                return h !== '抽烟'
              })
            },
            addFriendAtFirst() {
              this.student.friends.unshift({name: 'Jack',age: 30})
            },
            updateFirstFriendName() {
                this.student.friends[0].name = '张三'
            }
        },
      });
    </script>
  </body>
</html>
