{"ast":null,"code":"import \"core-js/modules/es.array.unshift.js\";\nimport pubsub from 'pubsub-js';\nimport MyHeader from \"./components/MyHeader\";\nimport MyList from \"./components/MyList\";\nimport MyFooter from \"./components/MyFooter\";\nexport default {\n  name: \"App\",\n  components: {\n    MyHeader,\n    MyList,\n    MyFooter\n  },\n  data() {\n    return {\n      todos: JSON.parse(localStorage.getItem(\"todos\")) || []\n    };\n  },\n  methods: {\n    //添加一个todo\n    addTodo(todoObj) {\n      this.todos.unshift(todoObj);\n      console.log(this);\n    },\n    //勾选或取消勾选一个todo\n    checkTodo(id) {\n      this.todos.forEach(todo => {\n        if (todo.id === id) todo.done = !todo.done;\n      });\n    },\n    //更新一个\n    updateTodo(id, title) {\n      this.todos.forEach(todo => {\n        if (todo.id === id) todo.title = title;\n      });\n    },\n    //删除一个todo\n    deleteTodo(_, id) {\n      this.todos.splice(this.todos.findIndex(todo => todo.id === id), 1);\n    },\n    //全选or全不选\n    checkAllTodo(done) {\n      this.todos.forEach(todo => {\n        todo.done = done;\n      });\n    },\n    //清除所有已经完成的todo\n    clearDoneTodo() {\n      this.todos = this.todos.filter(todo => !todo.done);\n    }\n  },\n  watch: {\n    todos: {\n      deep: true,\n      handler(value) {\n        localStorage.setItem(\"todos\", JSON.stringify(value));\n      }\n    }\n  },\n  mounted() {\n    this.$bus.$on('checkTodo', this.checkTodo);\n    this.$bus.$on('updateTodo', this.updateTodo);\n    this.pubID = pubsub.subscribe('deleteTodo', this.deleteTodo);\n  },\n  beforeDestroy() {\n    this.$bus.$off('checkTodo');\n    pubsub.unsubscribe(this.pubID);\n  }\n};","map":{"version":3,"names":["pubsub","MyHeader","MyList","MyFooter","name","components","data","todos","JSON","parse","localStorage","getItem","methods","addTodo","todoObj","unshift","console","log","checkTodo","id","forEach","todo","done","updateTodo","title","deleteTodo","_","splice","findIndex","checkAllTodo","clearDoneTodo","filter","watch","deep","handler","value","setItem","stringify","mounted","$bus","$on","pubID","subscribe","beforeDestroy","$off","unsubscribe"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <div id=\"root\">\n    <div class=\"todo-container\">\n      <div class=\"todo-wrap\">\n        <MyHeader @addTodo=\"addTodo\" />\n        <MyList\n          :todos=\"todos\"\n        />\n        <MyFooter\n          :todos=\"todos\"\n          @checkAllTodo=\"checkAllTodo\"\n          @clearDoneTodo=\"clearDoneTodo\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport pubsub from 'pubsub-js';\nimport MyHeader from \"./components/MyHeader\";\nimport MyList from \"./components/MyList\";\nimport MyFooter from \"./components/MyFooter\";\n\nexport default {\n  name: \"App\",\n  components: { MyHeader, MyList, MyFooter },\n  data() {\n    return {\n      todos: JSON.parse(localStorage.getItem(\"todos\")) || [],\n    };\n  },\n  methods: {\n    //添加一个todo\n    addTodo(todoObj) {\n      this.todos.unshift(todoObj);\n      console.log(this);\n    },\n    //勾选或取消勾选一个todo\n    checkTodo(id) {\n      this.todos.forEach((todo) => {\n        if (todo.id === id) todo.done = !todo.done;\n      });\n    },\n    //更新一个\n    updateTodo(id,title) {\n      this.todos.forEach((todo) => {\n        if (todo.id === id) todo.title = title\n      });\n    },\n    //删除一个todo\n    deleteTodo(_,id) {\n      this.todos.splice(\n        this.todos.findIndex((todo) => todo.id === id),\n        1\n      );\n    },\n    //全选or全不选\n    checkAllTodo(done) {\n      this.todos.forEach((todo) => {\n        todo.done = done;\n      });\n    },\n    //清除所有已经完成的todo\n    clearDoneTodo() {\n      this.todos = this.todos.filter((todo) => !todo.done);\n    },\n  },\n  watch: {\n    todos: {\n      deep: true,\n      handler(value) {\n        localStorage.setItem(\"todos\", JSON.stringify(value));\n      },\n    },\n  },\n  mounted() {\n    this.$bus.$on('checkTodo', this.checkTodo)\n    this.$bus.$on('updateTodo',this.updateTodo)\n    this.pubID = pubsub.subscribe('deleteTodo',this.deleteTodo)\n  },\n  beforeDestroy() {\n    this.$bus.$off('checkTodo')\n    pubsub.unsubscribe(this.pubID)\n  }\n};\n</script>\n\n<style>\n/*base*/\nbody {\n  background: #fff;\n}\n\n.btn {\n  display: inline-block;\n  padding: 4px 12px;\n  margin-bottom: 0;\n  font-size: 14px;\n  line-height: 20px;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),\n    0 1px 2px rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n}\n\n.btn-danger {\n  color: #fff;\n  background-color: #da4f49;\n  border: 1px solid #bd362f;\n}\n\n.btn-edit {\n  color: #fff;\n  background-color: skyblue;\n  border: 1px solid rgb(103, 159, 180);\n  margin-right: 5px;\n}\n\n.btn-danger:hover {\n  color: #fff;\n  background-color: #bd362f;\n}\n\n.btn:focus {\n  outline: none;\n}\n\n.todo-container {\n  width: 600px;\n  margin: 0 auto;\n}\n.todo-container .todo-wrap {\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n}\n</style>\n"],"mappings":";AAmBA,OAAAA,MAAA;AACA,OAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAJ,QAAA;IAAAC,MAAA;IAAAC;EAAA;EACAG,KAAA;IACA;MACAC,KAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,QAAAC,OAAA;MACA,KAAAP,KAAA,CAAAQ,OAAA,CAAAD,OAAA;MACAE,OAAA,CAAAC,GAAA;IACA;IACA;IACAC,UAAAC,EAAA;MACA,KAAAZ,KAAA,CAAAa,OAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA,EAAAE,IAAA,CAAAC,IAAA,IAAAD,IAAA,CAAAC,IAAA;MACA;IACA;IACA;IACAC,WAAAJ,EAAA,EAAAK,KAAA;MACA,KAAAjB,KAAA,CAAAa,OAAA,CAAAC,IAAA;QACA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA,EAAAE,IAAA,CAAAG,KAAA,GAAAA,KAAA;MACA;IACA;IACA;IACAC,WAAAC,CAAA,EAAAP,EAAA;MACA,KAAAZ,KAAA,CAAAoB,MAAA,CACA,KAAApB,KAAA,CAAAqB,SAAA,CAAAP,IAAA,IAAAA,IAAA,CAAAF,EAAA,KAAAA,EAAA,GACA,EACA;IACA;IACA;IACAU,aAAAP,IAAA;MACA,KAAAf,KAAA,CAAAa,OAAA,CAAAC,IAAA;QACAA,IAAA,CAAAC,IAAA,GAAAA,IAAA;MACA;IACA;IACA;IACAQ,cAAA;MACA,KAAAvB,KAAA,QAAAA,KAAA,CAAAwB,MAAA,CAAAV,IAAA,KAAAA,IAAA,CAAAC,IAAA;IACA;EACA;EACAU,KAAA;IACAzB,KAAA;MACA0B,IAAA;MACAC,QAAAC,KAAA;QACAzB,YAAA,CAAA0B,OAAA,UAAA5B,IAAA,CAAA6B,SAAA,CAAAF,KAAA;MACA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,mBAAAtB,SAAA;IACA,KAAAqB,IAAA,CAAAC,GAAA,oBAAAjB,UAAA;IACA,KAAAkB,KAAA,GAAAzC,MAAA,CAAA0C,SAAA,oBAAAjB,UAAA;EACA;EACAkB,cAAA;IACA,KAAAJ,IAAA,CAAAK,IAAA;IACA5C,MAAA,CAAA6C,WAAA,MAAAJ,KAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}